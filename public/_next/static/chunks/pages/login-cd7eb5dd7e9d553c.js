(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3921:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(3357)}])},8108:function(e,t,n){"use strict";var r=n(4246),a=n(1529),s=n.n(a);t.Z=function(e){var t=e.children;return(0,r.jsxs)("div",{children:[(0,r.jsx)(s(),{children:(0,r.jsx)("title",{children:"PGVirtual Backoffice"})}),(0,r.jsx)("div",{className:"font-sans text-gray-900 antialiased",style:{height:"100vh"},children:t})]})}},8021:function(e,t,n){"use strict";n.d(t,{a:function(){return p}});var r=n(3842),a=n(5034),s=n(1373),i=n(5827),o=n(6131),u=n(4476),c=n(7378),l=n(6677),p=function(e){var t=e.middleware,n=e.redirectIfAuthenticated,p=(0,l.useRouter)(),d=(0,o.ZP)("/api/mui/manager/user",(function(){return u.Z.get("/api/mui/manager/user").then((function(e){return e.data})).catch((function(e){if(409!==e.response.status)throw e;p.push("/api/mui/manager/verify-email")}))})),f=d.data,h=d.error,m=d.mutate,g=function(){return u.Z.get("/sanctum/csrf-cookie")},v=function(){var e=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t=e.setErrors,n=(0,s.Z)(e,["setErrors"]),[4,g()];case 1:return r.sent(),t([]),u.Z.post("/api/mui/manager/register",n).then((function(){return m()})).catch((function(e){if(422!==e.response.status)throw e;t(e.response.data.errors)})),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,i.__generator)(this,(function(a){switch(a.label){case 0:return t=e.setErrors,n=e.setStatus,r=(0,s.Z)(e,["setErrors","setStatus"]),[4,g()];case 1:return a.sent(),t([]),n(null),u.Z.defaults.headers.common["Content-Type"]="application/json",u.Z.defaults.headers.common.Accept="application/json",u.Z.post("/api/mui/manager/login",r).then((function(){return m()})).catch((function(e){console.log(e),t(e.response.data)})),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,i.__generator)(this,(function(a){switch(a.label){case 0:return t=e.setErrors,n=e.setStatus,r=e.email,[4,g()];case 1:return a.sent(),t([]),n(null),u.Z.post("/api/mui/manager/forgot-password",{email:r}).then((function(e){return n(e.data.status)})).catch((function(e){if(422!==e.response.status)throw e;t(e.response.data.errors)})),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.setErrors,n=e.setStatus,r=(0,s.Z)(e,["setErrors","setStatus"]),[4,g()];case 1:return i.sent(),t([]),n(null),u.Z.post("/api/mui/manager/reset-password",(0,a.Z)({token:p.query.token},r)).then((function(e){return p.push("/api/mui/manager/login?reset="+btoa(e.data.status))})).catch((function(e){if(422!==e.response.status)throw e;t(e.response.data.errors)})),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return h?[3,2]:[4,u.Z.post("/api/mui/manager/logout").then((function(){return m()}))];case 1:e.sent(),e.label=2;case 2:return window.location.pathname="/manager/login",[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){"guest"===t&&n&&f&&p.push(n),"/api/mui/manager/verify-email"===window.location.pathname&&(null===f||void 0===f?void 0:f.email_verified_at)&&p.push(n),"auth"===t&&h&&Z()}),[f,h]),{user:f,register:v,login:_,forgotPassword:w,resetPassword:x,resendEmailVerification:function(e){var t=e.setStatus;u.Z.post("/api/mui/manager/email/verification-notification").then((function(e){return t(e.data.status)}))},logout:Z}}},4476:function(e,t,n){"use strict";var r=n(4206),a=n.n(r),s=n(7061),i=a().create({baseURL:s.env.NEXT_PUBLIC_BACKEND_URL,headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0});t.Z=i},3357:function(e,t,n){"use strict";n.r(t);var r=n(3842),a=n(2050),s=n(5827),i=n(4246),o=n(8108),u=n(8021),c=n(7378),l=n(6677),p=n(66),d=n(9895),f=n(4476),h=n(6249);f.Z.defaults.headers.common["Content-Type"]="application/json",f.Z.defaults.headers.common.Accept="application/json";t.default=function(){var e=(0,l.useRouter)().query,t=(0,c.useContext)(h.Ni).setShowLogo,n=(0,u.a)({middleware:"guest",redirectIfAuthenticated:"/"}).login,f=(0,a.Z)((0,c.useState)(""),2),m=f[0],g=f[1],v=(0,a.Z)((0,c.useState)(""),2),_=v[0],w=v[1],x=(0,a.Z)((0,c.useState)(!1),2),Z=x[0],j=(x[1],(0,a.Z)((0,c.useState)([]),2)),N=j[0],b=j[1],E=(0,a.Z)((0,c.useState)(null),2),y=(E[0],E[1]),S=(0,a.Z)((0,c.useState)(!1),2),k=S[0],C=S[1],P=(0,d.useTranslation)().t,I=(0,a.Z)((0,c.useState)(!1),2),R=I[0],T=I[1];(0,c.useEffect)((function(){var n;(null===(n=e.reset)||void 0===n?void 0:n.length)>0&&0===N.length?y(atob(e.reset)):y(null),e.show_logo?t(e.show_logo):y(!0)}));var A=function(){var e=(0,r.Z)((function(e){return(0,s.__generator)(this,(function(t){return e.preventDefault(),n({username:m,password:_,remember:Z,setErrors:b,setStatus:y}),C(!1),[2]}))}));return function(t){return e.apply(this,arguments)}}();return(0,i.jsx)(o.Z,{children:(0,i.jsx)("form",{onSubmit:A,children:(0,i.jsxs)("div",{className:"p-panel",children:[(0,i.jsx)("div",{className:"p-panel__header",id:"login-page-header",children:(0,i.jsx)("h4",{className:"p-panel__title",children:P("login.title")})}),(0,i.jsx)("div",{className:"p-card u-vertically-center u-align--center",id:"login-page-panel",children:(0,i.jsxs)("div",{className:"p-card",children:[(0,i.jsx)("div",{className:"u-align-text--left",children:(0,i.jsx)(p.II,{takeFocus:!0,placeholder:"Username",id:"list-input-12",type:"text",label:P("login.username"),value:m,className:"block mt-1 w-full ",onChange:function(e){return g(e.target.value)},autoFocus:!0})}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"p-form-password-toggle",children:[(0,i.jsx)("label",{children:P("login.password")}),(0,i.jsxs)("button",{className:"p-button--base u-no-margin--bottom has-icon","aria-live":"polite","aria-controls":"password",onClick:function(e){e.preventDefault(),T(!R)},children:[(0,i.jsx)("span",{className:"p-form-password-toggle__label",children:P("login.password_show")}),(0,i.jsx)("i",{className:"p-icon--show"})]})]}),(0,i.jsx)("input",{type:R?"text":"password",name:"password",id:"password",value:_,onChange:function(e){return w(e.target.value)}})]}),(0,i.jsx)("div",{className:"p-form__group row",children:(0,i.jsxs)(p.zx,{appearance:"positive",hasIcon:k,onClick:function(e){C(!0)},children:[k&&(0,i.jsx)(p.$j,{text:P("submit")}),!k&&(0,i.jsx)("span",{children:P("submit")})]})}),(0,i.jsx)("div",{className:"p-form__group p-form-validation is-error",children:(0,i.jsx)("p",{className:"p-form-validation__message",children:N.message})})]})})]})})})}},1529:function(e,t,n){e.exports=n(3057)}},function(e){e.O(0,[863,774,888,179],(function(){return t=3921,e(e.s=t);var t}));var t=e.O();_N_E=t}]);